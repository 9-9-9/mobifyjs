<!DOCTYPE html>
<html class="foo">
<head>
  <meta charset="utf-8">
  <title>util.js tests</title>
  <link rel="stylesheet" href="/tests/resources/qunit-1.10.0.css">
  <script src="/tests/resources/qunit-1.10.0.js"></script>
  <script src="/tests/resources/require.js"></script>
  <script src="/tests/resources/jquery-1.7.1.js"></script>
</head>
<body>

<div id="qunit"></div>

<div id="qunit-fixture">

<div class="removeElementsFilter">

<script id="scriptsrc" src="fake1.js"></script>
<script id="scriptinline">
    console.log("fake2");
</script>
<img src="fake.png">

</div>

</div>


<script>
    QUnit.config.autostart = false;
    require.config({
        "baseUrl": "../src/",  
    })
    require(["../src/utils.js"], function(Utils) {
        QUnit.start();
        
        // Test disabling attributes that cause resource loading
        test("removeElementFilter", function() {
            var scripts = document.querySelectorAll(".removeElementsFilter script");
            var imgs = document.querySelectorAll(".removeElementsFilter img");

            // Test contains
            var filteredScripts = Utils.removeElementFilter(scripts, [{
                "does": true, 
                "matchType": "contains", 
                "match": "fake1"
            }], "src");
            equal(filteredScripts[0], document.getElementById("scriptinline"), "Contains" );
        });



    });
</script>
</body>
</html>
